{"ast":null,"code":"import _regeneratorRuntime from\"C:/Dev/react/project1/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"C:/Dev/react/project1/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _toConsumableArray from\"C:/Dev/react/project1/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js\";import _objectSpread from\"C:/Dev/react/project1/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import{profileAPI}from'./../components/api/api';var ADD_POST='ADD-POST';var UPDATE_NEW_POST_TEXT='UPDATE-NEW-POST-TEXT';var SET_USER_PROFILE='SET_USER_PROFILE';var SET_STATUS='SET_STATUS';var DELETE_POST='DELETE_POST';var initialState={posts:[{'id':'1','message':'Hi,how are you?','likesCount':22},{'id':'2','message':'It\\'s my first post','likesCount':15}],profile:null,status:\"\"};var profileReducer=function profileReducer(){var state=arguments.length>0&&arguments[0]!==undefined?arguments[0]:initialState;var action=arguments.length>1?arguments[1]:undefined;switch(action.type){case ADD_POST:{var newPost={'id':5,'message':action.post,'likesCount':0};return _objectSpread(_objectSpread({},state),{},{posts:[].concat(_toConsumableArray(state.posts),[newPost])});}case UPDATE_NEW_POST_TEXT:{return _objectSpread(_objectSpread({},state),{},{newPostText:action.newText});}case SET_USER_PROFILE:{return _objectSpread(_objectSpread({},state),{},{profile:action.profile});}case SET_STATUS:{return _objectSpread(_objectSpread({},state),{},{status:action.status});}case DELETE_POST:{return _objectSpread(_objectSpread({},state),{},{posts:state.posts.filter(function(p){return p.id!=action.postId;})});}default:{return state;}}};export var addPostActionCreater=function addPostActionCreater(post){return{type:ADD_POST,post:post};};export var setUserProfile=function setUserProfile(profile){return{type:SET_USER_PROFILE,profile:profile};};export var updateNewPostTextActionCreater=function updateNewPostTextActionCreater(text){return{type:UPDATE_NEW_POST_TEXT,newText:text};};export var setStatus=function setStatus(status){return{type:SET_STATUS,status:status};};export var deletePost=function deletePost(postId){return{type:DELETE_POST,postId:postId};};export var getProfile=function getProfile(profileId){return/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(dispatch){var response;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:_context.next=2;return profileAPI.getProfile(profileId);case 2:response=_context.sent;dispatch(setUserProfile(response.data));case 4:case\"end\":return _context.stop();}},_callee);}));return function(_x){return _ref.apply(this,arguments);};}();};export var getStatus=function getStatus(profileId){return/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee2(dispatch){var response;return _regeneratorRuntime().wrap(function _callee2$(_context2){while(1)switch(_context2.prev=_context2.next){case 0:_context2.next=2;return profileAPI.getStatus(profileId);case 2:response=_context2.sent;dispatch(setStatus(response.data));case 4:case\"end\":return _context2.stop();}},_callee2);}));return function(_x2){return _ref2.apply(this,arguments);};}();};export var updateStatus=function updateStatus(status){return/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee3(dispatch){var response;return _regeneratorRuntime().wrap(function _callee3$(_context3){while(1)switch(_context3.prev=_context3.next){case 0:_context3.next=2;return profileAPI.updateStatus(status);case 2:response=_context3.sent;if(response.data.resultCode===0){dispatch(setStatus(status));}case 4:case\"end\":return _context3.stop();}},_callee3);}));return function(_x3){return _ref3.apply(this,arguments);};}();};export default profileReducer;","map":{"version":3,"names":["profileAPI","ADD_POST","UPDATE_NEW_POST_TEXT","SET_USER_PROFILE","SET_STATUS","DELETE_POST","initialState","posts","profile","status","profileReducer","state","action","type","newPost","post","newPostText","newText","filter","p","id","postId","addPostActionCreater","setUserProfile","updateNewPostTextActionCreater","text","setStatus","deletePost","getProfile","profileId","dispatch","response","data","getStatus","updateStatus","resultCode"],"sources":["C:/Dev/react/project1/src/redux/profile-reducer.js"],"sourcesContent":["import {profileAPI} from './../components/api/api';\r\nconst ADD_POST = 'ADD-POST'\r\nconst UPDATE_NEW_POST_TEXT = 'UPDATE-NEW-POST-TEXT'\r\nconst SET_USER_PROFILE  = 'SET_USER_PROFILE'\r\nconst SET_STATUS  = 'SET_STATUS'\r\nconst DELETE_POST = 'DELETE_POST'\r\n\r\n\r\nlet initialState = {\r\n  posts: [\r\n      {'id':'1', 'message':'Hi,how are you?', 'likesCount': 22},\r\n      {'id':'2', 'message':'It\\'s my first post', 'likesCount': 15}\r\n    ],\r\n  profile:null,\r\n  status:\"\",\r\n}\r\n\r\nconst profileReducer = (state = initialState,action) =>{\r\n    switch(action.type){\r\n   \r\n    case ADD_POST: {\r\n        let newPost = {\r\n          'id': 5, \r\n          'message':action.post,\r\n          'likesCount': 0\r\n        };\r\n        return {\r\n            ...state,\r\n            posts: [...state.posts, newPost]\r\n        }\r\n      }\r\n    case UPDATE_NEW_POST_TEXT:{\r\n        return {\r\n          ...state,\r\n          newPostText:action.newText\r\n        }\r\n    }\r\n    case SET_USER_PROFILE:{\r\n      return {\r\n        ...state,\r\n        profile:action.profile\r\n      }\r\n    }\r\n    case SET_STATUS:{\r\n      return {\r\n        ...state,\r\n        status:action.status\r\n      }\r\n    }\r\n    case DELETE_POST:{\r\n      return {\r\n        ...state,\r\n        posts:state.posts.filter(p => p.id != action.postId)\r\n      }\r\n    }\r\n    default: {\r\n        return state;\r\n    }\r\n  }\r\n}\r\n\r\nexport const addPostActionCreater = (post) => ({type:ADD_POST,post});\r\nexport const setUserProfile  = (profile) => ({type:SET_USER_PROFILE,profile});\r\nexport const updateNewPostTextActionCreater = (text) =>({ type:UPDATE_NEW_POST_TEXT, newText:text });\r\nexport const setStatus = (status) => ({ type:SET_STATUS, status:status });\r\nexport const deletePost = (postId) => ({ type:DELETE_POST,postId});\r\n\r\n\r\nexport const getProfile = (profileId) => async (dispatch) => {\r\n    let response = await profileAPI.getProfile(profileId)\r\n      dispatch(setUserProfile(response.data));\r\n    }\r\nexport const getStatus = (profileId) => async (dispatch) => {\r\n  let response = await profileAPI.getStatus(profileId)\r\n      dispatch(setStatus(response.data));\r\n    }\r\nexport const updateStatus = (status) => async (dispatch) => {\r\n  let response = await profileAPI.updateStatus(status)\r\n      if(response.data.resultCode === 0) {\r\n        dispatch(setStatus(status));\r\n      }\r\n  }\r\nexport default profileReducer;"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}
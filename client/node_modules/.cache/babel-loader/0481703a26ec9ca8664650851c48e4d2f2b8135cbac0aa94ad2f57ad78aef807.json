{"ast":null,"code":"import _classCallCheck from\"C:/Dev/react/project1/node_modules/@babel/runtime/helpers/esm/classCallCheck.js\";import _createClass from\"C:/Dev/react/project1/node_modules/@babel/runtime/helpers/esm/createClass.js\";import _inherits from\"C:/Dev/react/project1/node_modules/@babel/runtime/helpers/esm/inherits.js\";import _createSuper from\"C:/Dev/react/project1/node_modules/@babel/runtime/helpers/esm/createSuper.js\";import _objectSpread from\"C:/Dev/react/project1/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import Profile from'./Profile';import React from'react';import{connect}from'react-redux';import{getProfile,getStatus,updateStatus,savePhoto,saveProfile}from'./../../redux/profile-reducer';import{withAuthRedirect}from'./../../hoc/withAuthRedirect';import{useLocation,useNavigate,useParams}from\"react-router-dom\";import{compose}from'redux';import{jsx as _jsx}from\"react/jsx-runtime\";function withRouter(Component){function ComponentWithRouterProp(props){var location=useLocation();var navigate=useNavigate();var params=useParams();return/*#__PURE__*/_jsx(Component,_objectSpread(_objectSpread({},props),{},{router:{location:location,navigate:navigate,params:params}}));}return ComponentWithRouterProp;}var ProfileContainer=/*#__PURE__*/function(_React$Component){_inherits(ProfileContainer,_React$Component);var _super=_createSuper(ProfileContainer);function ProfileContainer(){_classCallCheck(this,ProfileContainer);return _super.apply(this,arguments);}_createClass(ProfileContainer,[{key:\"refreshProfile\",value:function refreshProfile(){var profileId=this.props.router.params.userId;if(!profileId){profileId=this.props.userId;}this.props.getProfile(profileId);this.props.getStatus(profileId);}},{key:\"componentDidMount\",value:function componentDidMount(){this.refreshProfile();}},{key:\"componentDidUpdate\",value:function componentDidUpdate(prevProps,prevState){if(this.props.router.params.userId!=prevProps.router.params.userId){this.refreshProfile();}}},{key:\"render\",value:function render(){return/*#__PURE__*/_jsx(Profile,_objectSpread(_objectSpread({},this.props),{},{isOwner:!this.props.router.params.userId,profile:this.props.profile,status:this.props.status,updateStatus:this.props.updateStatus,savePhoto:this.props.savePhoto,saveProfile:this.props.saveProfile}));}}]);return ProfileContainer;}(React.Component);var mapStateToProps=function mapStateToProps(state){return{profile:state.profilePage.profile,status:state.profilePage.status,userId:state.auth.userId,isAuth:state.auth.isAuth,error:state.profilePage.error};};export default compose(connect(mapStateToProps,{getProfile:getProfile,getStatus:getStatus,updateStatus:updateStatus,savePhoto:savePhoto,saveProfile:saveProfile}),withRouter,withAuthRedirect)(ProfileContainer);","map":{"version":3,"names":["Profile","React","connect","getProfile","getStatus","updateStatus","savePhoto","saveProfile","withAuthRedirect","useLocation","useNavigate","useParams","compose","withRouter","Component","ComponentWithRouterProp","props","location","navigate","params","ProfileContainer","profileId","router","userId","refreshProfile","prevProps","prevState","profile","status","mapStateToProps","state","profilePage","auth","isAuth","error"],"sources":["C:/Dev/react/project1/src/components/profile/ProfileContainer.jsx"],"sourcesContent":["import Profile from './Profile';\r\nimport React from 'react';\r\nimport {connect}  from 'react-redux';\r\nimport {getProfile,getStatus,updateStatus,savePhoto,saveProfile} from './../../redux/profile-reducer'\r\nimport {withAuthRedirect} from './../../hoc/withAuthRedirect'\r\nimport {\r\n    useLocation,\r\n    useNavigate,\r\n    useParams,\r\n  } from \"react-router-dom\";\r\nimport {compose} from 'redux'\r\n\r\n  function withRouter(Component) {\r\n    function ComponentWithRouterProp(props) {\r\n        let location = useLocation();\r\n        let navigate = useNavigate();\r\n        let params = useParams();\r\n        return (\r\n            <Component\r\n                {...props}\r\n                router={{ location, navigate, params }}\r\n            />\r\n        );\r\n    }\r\n\r\n    return ComponentWithRouterProp;\r\n}\r\n\r\nclass ProfileContainer extends React.Component {\r\n\r\n\r\nrefreshProfile() {\r\n    let profileId = this.props.router.params.userId;\r\n    if(!profileId) {\r\n        profileId = this.props.userId;\r\n    }\r\n    this.props.getProfile(profileId);\r\n    this.props.getStatus(profileId);   \r\n}\r\ncomponentDidMount() {\r\n    this.refreshProfile()\r\n}\r\ncomponentDidUpdate(prevProps,prevState) {\r\n    if(this.props.router.params.userId != prevProps.router.params.userId) {\r\n        this.refreshProfile()\r\n    }\r\n}\r\n\r\n    render() {\r\n        return (\r\n            <Profile \r\n                {...this.props} \r\n                isOwner={!this.props.router.params.userId} \r\n                profile={this.props.profile} \r\n                status={this.props.status} \r\n                updateStatus={this.props.updateStatus}\r\n                savePhoto={this.props.savePhoto}\r\n                saveProfile={this.props.saveProfile}\r\n            />\r\n        )\r\n    }\r\n}\r\n\r\nlet mapStateToProps = (state) => ({\r\n    profile:state.profilePage.profile,\r\n    status:state.profilePage.status,\r\n    userId:state.auth.userId,\r\n    isAuth:state.auth.isAuth,\r\n    error:state.profilePage.error\r\n})\r\n\r\nexport default compose(\r\n    connect(mapStateToProps,{getProfile,getStatus,updateStatus,savePhoto,saveProfile}),\r\n    withRouter,\r\n    withAuthRedirect\r\n)(ProfileContainer)"],"mappings":"sgBAAA,MAAOA,QAAO,KAAM,WAAW,CAC/B,MAAOC,MAAK,KAAM,OAAO,CACzB,OAAQC,OAAO,KAAQ,aAAa,CACpC,OAAQC,UAAU,CAACC,SAAS,CAACC,YAAY,CAACC,SAAS,CAACC,WAAW,KAAO,+BAA+B,CACrG,OAAQC,gBAAgB,KAAO,8BAA8B,CAC7D,OACIC,WAAW,CACXC,WAAW,CACXC,SAAS,KACJ,kBAAkB,CAC3B,OAAQC,OAAO,KAAO,OAAO,4CAE3B,QAASC,WAAU,CAACC,SAAS,CAAE,CAC7B,QAASC,wBAAuB,CAACC,KAAK,CAAE,CACpC,GAAIC,SAAQ,CAAGR,WAAW,EAAE,CAC5B,GAAIS,SAAQ,CAAGR,WAAW,EAAE,CAC5B,GAAIS,OAAM,CAAGR,SAAS,EAAE,CACxB,mBACI,KAAC,SAAS,gCACFK,KAAK,MACT,MAAM,CAAE,CAAEC,QAAQ,CAARA,QAAQ,CAAEC,QAAQ,CAARA,QAAQ,CAAEC,MAAM,CAANA,MAAO,CAAE,GACzC,CAEV,CAEA,MAAOJ,wBAAuB,CAClC,CAAC,GAEKK,iBAAgB,mSAGtB,yBAAiB,CACb,GAAIC,UAAS,CAAG,IAAI,CAACL,KAAK,CAACM,MAAM,CAACH,MAAM,CAACI,MAAM,CAC/C,GAAG,CAACF,SAAS,CAAE,CACXA,SAAS,CAAG,IAAI,CAACL,KAAK,CAACO,MAAM,CACjC,CACA,IAAI,CAACP,KAAK,CAACb,UAAU,CAACkB,SAAS,CAAC,CAChC,IAAI,CAACL,KAAK,CAACZ,SAAS,CAACiB,SAAS,CAAC,CACnC,CAAC,iCACD,4BAAoB,CAChB,IAAI,CAACG,cAAc,EAAE,CACzB,CAAC,kCACD,4BAAmBC,SAAS,CAACC,SAAS,CAAE,CACpC,GAAG,IAAI,CAACV,KAAK,CAACM,MAAM,CAACH,MAAM,CAACI,MAAM,EAAIE,SAAS,CAACH,MAAM,CAACH,MAAM,CAACI,MAAM,CAAE,CAClE,IAAI,CAACC,cAAc,EAAE,CACzB,CACJ,CAAC,sBAEG,iBAAS,CACL,mBACI,KAAC,OAAO,gCACA,IAAI,CAACR,KAAK,MACd,OAAO,CAAE,CAAC,IAAI,CAACA,KAAK,CAACM,MAAM,CAACH,MAAM,CAACI,MAAO,CAC1C,OAAO,CAAE,IAAI,CAACP,KAAK,CAACW,OAAQ,CAC5B,MAAM,CAAE,IAAI,CAACX,KAAK,CAACY,MAAO,CAC1B,YAAY,CAAE,IAAI,CAACZ,KAAK,CAACX,YAAa,CACtC,SAAS,CAAE,IAAI,CAACW,KAAK,CAACV,SAAU,CAChC,WAAW,CAAE,IAAI,CAACU,KAAK,CAACT,WAAY,GACtC,CAEV,CAAC,8BAhC0BN,KAAK,CAACa,SAAS,EAmC9C,GAAIe,gBAAe,CAAG,QAAlBA,gBAAe,CAAIC,KAAK,QAAM,CAC9BH,OAAO,CAACG,KAAK,CAACC,WAAW,CAACJ,OAAO,CACjCC,MAAM,CAACE,KAAK,CAACC,WAAW,CAACH,MAAM,CAC/BL,MAAM,CAACO,KAAK,CAACE,IAAI,CAACT,MAAM,CACxBU,MAAM,CAACH,KAAK,CAACE,IAAI,CAACC,MAAM,CACxBC,KAAK,CAACJ,KAAK,CAACC,WAAW,CAACG,KAC5B,CAAC,EAAC,CAEF,cAAetB,QAAO,CAClBV,OAAO,CAAC2B,eAAe,CAAC,CAAC1B,UAAU,CAAVA,UAAU,CAACC,SAAS,CAATA,SAAS,CAACC,YAAY,CAAZA,YAAY,CAACC,SAAS,CAATA,SAAS,CAACC,WAAW,CAAXA,WAAW,CAAC,CAAC,CAClFM,UAAU,CACVL,gBAAgB,CACnB,CAACY,gBAAgB,CAAC"},"metadata":{},"sourceType":"module","externalDependencies":[]}
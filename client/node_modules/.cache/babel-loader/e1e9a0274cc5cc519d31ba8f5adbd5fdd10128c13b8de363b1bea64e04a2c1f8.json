{"ast":null,"code":"import { authAPI } from './../components/api/api';\nconst SET_USER_DATA = 'SET_USER_DATAA';\nlet initialState = {\n  userId: null,\n  email: null,\n  login: null,\n  isAuth: false\n};\nexport const authReducer = function () {\n  let state = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : initialState;\n  let action = arguments.length > 1 ? arguments[1] : undefined;\n  switch (action.type) {\n    case SET_USER_DATA:\n      return {\n        ...state,\n        ...action.data,\n        isAuth: true\n      };\n    default:\n      return state;\n  }\n};\nexport const setAuthUserData = (userId, email, login) => ({\n  type: SET_USER_DATA,\n  data: {\n    userId,\n    email,\n    login\n  }\n});\nexport const getData = () => {\n  return dispatch => {\n    authAPI.getData().then(response => {\n      if (response.resultCode === 0) {\n        let {\n          id,\n          login,\n          email\n        } = response.data;\n        dispatch(setAuthUserData(id, email, login));\n      }\n    });\n  };\n};\nexport const login = em => {\n  return dispatch => {\n    authAPI.getData().then(response => {\n      if (response.resultCode === 0) {\n        let {\n          id,\n          login,\n          email\n        } = response.data;\n        dispatch(setAuthUserData(id, email, login));\n      }\n    });\n  };\n};\nexport default authReducer;","map":{"version":3,"names":["authAPI","SET_USER_DATA","initialState","userId","email","login","isAuth","authReducer","state","action","type","data","setAuthUserData","getData","dispatch","then","response","resultCode","id","em"],"sources":["C:/Dev/react/project1/src/redux/auth-reducer.js"],"sourcesContent":["import {authAPI} from './../components/api/api';\r\nconst SET_USER_DATA = 'SET_USER_DATAA'\r\n\r\n\r\nlet initialState =  {\r\n    userId:null,\r\n    email:null,\r\n    login:null,\r\n    isAuth:false,\r\n}\r\n\r\nexport const authReducer = (state = initialState,action) =>{\r\n  switch(action.type) {\r\n    case SET_USER_DATA: \r\n        return { \r\n            ...state,\r\n            ...action.data,\r\n            isAuth:true\r\n        }\r\n    default: \r\n        return state;\r\n  }\r\n}\r\nexport const setAuthUserData = (userId,email,login) => ({\r\n  type:SET_USER_DATA, data:{userId,email,login}\r\n})\r\n\r\nexport const getData = () => {\r\n  return (dispatch) =>  {\r\n    authAPI.getData().then(response => {\r\n    if(response.resultCode === 0) {\r\n      let {id,login,email} = response.data;\r\n      dispatch(setAuthUserData(id, email, login));\r\n  }})\r\n  }\r\n}\r\nexport const login = (em) => {\r\n  return (dispatch) =>  {\r\n    authAPI.getData().then(response => {\r\n    if(response.resultCode === 0) {\r\n      let {id,login,email} = response.data;\r\n      dispatch(setAuthUserData(id, email, login));\r\n  }})\r\n  }\r\n}\r\n\r\nexport default authReducer;"],"mappings":"AAAA,SAAQA,OAAO,QAAO,yBAAyB;AAC/C,MAAMC,aAAa,GAAG,gBAAgB;AAGtC,IAAIC,YAAY,GAAI;EAChBC,MAAM,EAAC,IAAI;EACXC,KAAK,EAAC,IAAI;EACVC,KAAK,EAAC,IAAI;EACVC,MAAM,EAAC;AACX,CAAC;AAED,OAAO,MAAMC,WAAW,GAAG,YAAgC;EAAA,IAA/BC,KAAK,uEAAGN,YAAY;EAAA,IAACO,MAAM;EACrD,QAAOA,MAAM,CAACC,IAAI;IAChB,KAAKT,aAAa;MACd,OAAO;QACH,GAAGO,KAAK;QACR,GAAGC,MAAM,CAACE,IAAI;QACdL,MAAM,EAAC;MACX,CAAC;IACL;MACI,OAAOE,KAAK;EAAC;AAErB,CAAC;AACD,OAAO,MAAMI,eAAe,GAAG,CAACT,MAAM,EAACC,KAAK,EAACC,KAAK,MAAM;EACtDK,IAAI,EAACT,aAAa;EAAEU,IAAI,EAAC;IAACR,MAAM;IAACC,KAAK;IAACC;EAAK;AAC9C,CAAC,CAAC;AAEF,OAAO,MAAMQ,OAAO,GAAG,MAAM;EAC3B,OAAQC,QAAQ,IAAM;IACpBd,OAAO,CAACa,OAAO,EAAE,CAACE,IAAI,CAACC,QAAQ,IAAI;MACnC,IAAGA,QAAQ,CAACC,UAAU,KAAK,CAAC,EAAE;QAC5B,IAAI;UAACC,EAAE;UAACb,KAAK;UAACD;QAAK,CAAC,GAAGY,QAAQ,CAACL,IAAI;QACpCG,QAAQ,CAACF,eAAe,CAACM,EAAE,EAAEd,KAAK,EAAEC,KAAK,CAAC,CAAC;MAC/C;IAAC,CAAC,CAAC;EACH,CAAC;AACH,CAAC;AACD,OAAO,MAAMA,KAAK,GAAIc,EAAE,IAAK;EAC3B,OAAQL,QAAQ,IAAM;IACpBd,OAAO,CAACa,OAAO,EAAE,CAACE,IAAI,CAACC,QAAQ,IAAI;MACnC,IAAGA,QAAQ,CAACC,UAAU,KAAK,CAAC,EAAE;QAC5B,IAAI;UAACC,EAAE;UAACb,KAAK;UAACD;QAAK,CAAC,GAAGY,QAAQ,CAACL,IAAI;QACpCG,QAAQ,CAACF,eAAe,CAACM,EAAE,EAAEd,KAAK,EAAEC,KAAK,CAAC,CAAC;MAC/C;IAAC,CAAC,CAAC;EACH,CAAC;AACH,CAAC;AAED,eAAeE,WAAW"},"metadata":{},"sourceType":"module","externalDependencies":[]}